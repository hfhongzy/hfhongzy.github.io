<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>2024 Fall - Data Structures and Algorithms Analysis Tutorials - Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Hong Zhaoyang"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Hong Zhaoyang"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Lab 8E Sum You are given a \(n\times m\) matrix. Take out some non-adjacent numbers and maximize their summation. Let&amp;#39;s first take a look at a classic search-and-backtrack model. Task: Generate all pe"><meta property="og:type" content="blog"><meta property="og:title" content="2024 Fall - Data Structures and Algorithms Analysis Tutorials"><meta property="og:url" content="https://hfhongzy.github.io/tutorials/index.html"><meta property="og:site_name" content="Blog"><meta property="og:description" content="Lab 8E Sum You are given a \(n\times m\) matrix. Take out some non-adjacent numbers and maximize their summation. Let&amp;#39;s first take a look at a classic search-and-backtrack model. Task: Generate all pe"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://hfhongzy.github.io/img/og_image.png"><meta property="article:published_time" content="2024-10-22T12:00:00.000Z"><meta property="article:modified_time" content="2024-12-20T07:13:30.632Z"><meta property="article:author" content="Hong Zhaoyang"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://hfhongzy.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hfhongzy.github.io/tutorials/index.html"},"headline":"2024 Fall - Data Structures and Algorithms Analysis Tutorials","image":["https://hfhongzy.github.io/img/og_image.png"],"datePublished":"2024-10-22T12:00:00.000Z","dateModified":"2024-12-20T07:13:30.632Z","author":{"@type":"Person","name":"Hong Zhaoyang"},"publisher":{"@type":"Organization","name":"Blog","logo":{"@type":"ImageObject","url":{"text":"My Site"}}},"description":"Lab 8E Sum You are given a \\(n\\times m\\) matrix. Take out some non-adjacent numbers and maximize their summation. Let&#39;s first take a look at a classic search-and-backtrack model. Task: Generate all pe"}</script><link rel="canonical" href="https://hfhongzy.github.io/tutorials/index.html"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">My Site</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><h1 class="title is-3 is-size-4-mobile">2024 Fall - Data Structures and Algorithms Analysis Tutorials</h1><div class="content"><p><strong>Lab 8E Sum</strong></p>
<p>You are given a <span class="math inline">\(n\times m\)</span>
matrix. Take out some non-adjacent numbers and maximize their
summation.</p>
<p>Let's first take a look at a classic search-and-backtrack model.</p>
<p>Task: Generate all permutations of length <span
class="math inline">\(n\)</span>.</p>
<p>Sample Input</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure>
<p>Sample Output</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="number">1</span> <span class="number">3</span> <span class="number">2</span></span><br><span class="line"><span class="number">2</span> <span class="number">1</span> <span class="number">3</span></span><br><span class="line"><span class="number">2</span> <span class="number">3</span> <span class="number">1</span></span><br><span class="line"><span class="number">3</span> <span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="number">3</span> <span class="number">2</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>Idea: Enumerate. If <span class="math inline">\(n=3\)</span>, you can
use <span class="math inline">\(3\)</span> nested for-loops and a
visited array to simplify your code.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> visited[] = <span class="keyword">new</span> <span class="title class_">boolean</span> [<span class="number">4</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">a1</span> <span class="operator">=</span> <span class="number">1</span>; a1 &lt;= <span class="number">3</span>; a1 ++) &#123;</span><br><span class="line">   <span class="keyword">if</span> (!vis[a1]) &#123;</span><br><span class="line">      vis[a1] = <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">a2</span> <span class="operator">=</span> <span class="number">1</span>; a2 &lt;= <span class="number">3</span>; a2 ++) &#123;</span><br><span class="line">         <span class="keyword">if</span> (!vis[a2]) &#123;</span><br><span class="line">            vis[a2] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">a3</span> <span class="operator">=</span> <span class="number">1</span>; a3 &lt;= <span class="number">3</span>; a3 ++) &#123;</span><br><span class="line">               <span class="keyword">if</span> (!vis[a3]) &#123;</span><br><span class="line">                  vis[a3] = <span class="literal">true</span>;</span><br><span class="line">                  <span class="comment">// print [a1 a2 a3]</span></span><br><span class="line">                  vis[a3] = <span class="literal">false</span>;</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            vis[a2] = <span class="literal">false</span>;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      vis[a1] = <span class="literal">false</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>But you'd better don't code like this; it is stupid:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (n == <span class="number">1</span>) &#123; <span class="comment">/*...*/</span> &#125;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">2</span>) &#123; <span class="comment">/*...*/</span> &#125;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">3</span>) &#123; <span class="comment">/*...*/</span> &#125;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">4</span>) &#123; <span class="comment">/*...*/</span> &#125;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>
<p>So instead we can use recursion.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> []visited = <span class="keyword">new</span> <span class="title class_">boolean</span> visited[n + <span class="number">1</span>];</span><br><span class="line"><span class="type">int</span> []a = <span class="keyword">new</span> <span class="title class_">int</span> a[n + <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="type">int</span> n;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">search</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">   <span class="comment">// a[1], a[2], ..., a[x-1] has been filled</span></span><br><span class="line">   <span class="keyword">if</span> (x == n + <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i ++) &#123;</span><br><span class="line">         System.out.printf(<span class="string">&quot;%d &quot;</span>, a[i]);</span><br><span class="line">      &#125;</span><br><span class="line">      System.out.printf(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> ;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i ++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!visited[i]) &#123;</span><br><span class="line">         a[x] = i;</span><br><span class="line">         visited[i] = <span class="literal">true</span>; <span class="comment">// mark number i as &quot;used&quot;</span></span><br><span class="line">         search(i + <span class="number">1</span>); <span class="comment">// recurse</span></span><br><span class="line">			visited[i] = <span class="literal">false</span>; <span class="comment">// backtrack</span></span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">   <span class="comment">// program start here</span></span><br><span class="line">   n = <span class="number">5</span>;</span><br><span class="line">   search(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>After you know this basic mechanism, you can finish this problem. The
code is like</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> [][]chosen;</span><br><span class="line"><span class="type">int</span> answer;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">search</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> sum)</span> &#123; <span class="comment">// an additional variable (the sum of all chosen elements)</span></span><br><span class="line">   <span class="keyword">if</span> (x == n + <span class="number">1</span> &amp;&amp; y == <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (answer &lt; sum)</span><br><span class="line">         answer = sum;</span><br><span class="line">      <span class="keyword">return</span> ;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// don&#x27;t choose (x, y):</span></span><br><span class="line">   <span class="keyword">if</span> (y == m) &#123;</span><br><span class="line">      search(x + <span class="number">1</span>, <span class="number">1</span>, sum); <span class="comment">// start a new line</span></span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      search(x, y + <span class="number">1</span>, sum); <span class="comment">// next element in this row</span></span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// choose (x, y):</span></span><br><span class="line">   </span><br><span class="line">   <span class="keyword">if</span> (!chosen[x-<span class="number">1</span>][y] &amp;&amp; !chosen[x-<span class="number">1</span>][y-<span class="number">1</span>]</span><br><span class="line">       &amp;&amp; chosen[x][y-<span class="number">1</span>]) &#123;</span><br><span class="line">      <span class="comment">// the neighbors that have been decided to be chosen or not must not be selected</span></span><br><span class="line">      chosen[x][y] = <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">if</span> (y == m) &#123;</span><br><span class="line">         search(x + <span class="number">1</span>, <span class="number">1</span>, sum + a[x][y]);  <span class="comment">// start a new line</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         search(x, y + <span class="number">1</span>, sum + a[x][y]);  <span class="comment">// next element in this row</span></span><br><span class="line">      &#125;</span><br><span class="line">      chosen[x][y] = <span class="literal">false</span>; <span class="comment">// don&#x27;t forget to backtrack</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// main:</span></span><br><span class="line">search(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// print(answer);</span></span><br></pre></td></tr></table></figure>
<p>Lab4E Magic Number: By Zhang Shuwei</p>
<p><strong>Problem Description</strong></p>
<p>Build a Cartesian tree. (Note that in this problem the root is the
maximum)</p>
<p>(To learn more about Cartesian tree:
https://en.wikipedia.org/wiki/Cartesian_tree)</p>
<p><strong>Solution</strong></p>
<p>An intuitive approach:</p>
<ul>
<li><p>Find the maximum value and partition current interval into two
half, recursively solve the sub problem.</p></li>
<li><p>Each time we solves a sub problem, either a left / right child of
current node is found.</p></li>
<li><p>For sequence <span class="math inline">\(\{3, 5, 1, 4,
2\}\)</span>:</p>
<ul>
<li><p>Find the maximum <span class="math inline">\(5\)</span> in
interval <span class="math inline">\([1,5]\)</span>, and recursively
deal with interval <span class="math inline">\([1,1]\)</span> and <span
class="math inline">\([3, 5]\)</span>.</p></li>
<li><p>For <span class="math inline">\([1, 1]\)</span>, <span
class="math inline">\(3\)</span> is the maximum.</p></li>
<li><p>For <span class="math inline">\([3, 5]\)</span>, <span
class="math inline">\(4\)</span> is the maximum, recursively deal with
interval <span class="math inline">\([3, 3]\)</span> and <span
class="math inline">\([5, 5]\)</span>.</p></li>
<li><p>...</p></li>
</ul></li>
<li><p>Finally, we complete the construction.</p></li>
</ul>
<p>This approach requires an efficient method to find the interval
maximum, which is also called RMQ (Range Maximum / Minimum query,
https://en.wikipedia.org/wiki/Range_minimum_query) problem. There are
some classic algorithms, for example, the sparse table with <span
class="math inline">\(O(n\log n)\)</span> preprocessing and <span
class="math inline">\(O(1)\)</span> answering time complexity and <span
class="math inline">\(O(n\log n)\)</span> space complexity.</p>
<p>However, we need a more efficient (and also far more simple)
algorithm to solve the problem.</p>
<p>Let's consider a simplified problem: <strong>Given a sequence <span
class="math inline">\(\{a_n\}\)</span>, for each element, find the
largest element to the left that is smaller than it. </strong></p>
<p>The first observation is that:</p>
<ul>
<li>If <span class="math inline">\(i &lt; j\)</span> and <span
class="math inline">\(a_i &lt; a_j\)</span>, then <span
class="math inline">\(a_i\)</span> can never contribute to the elements
to the right of <span class="math inline">\(a_j\)</span>.</li>
</ul>
<p>Thus, for position <span class="math inline">\(k\)</span>, the only
possible results of <span class="math inline">\(k\)</span> must belong
to a decreasing sequence <span class="math inline">\({a_{p_1},
...,a_{p_l}}\)</span>, where <span class="math inline">\(1\leq p_1 &lt;
... &lt;p_l &lt;k\)</span>, <span class="math inline">\(a_{p_1}\gt
a_{p_2} ... &gt; a_{p_l}\)</span>. Besides, each element in the sequence
must be a suffix maximum of <span
class="math inline">\(a_1...a_{k-1}\)</span>. (Otherwise, it cannot
contribute to <span class="math inline">\(a_k\)</span> since there is a
larger one on its right).</p>
<p>Suppose we have maintained such a sequence before <span
class="math inline">\(k\)</span>, to get the answer for <span
class="math inline">\(k\)</span> and maintain the sequence, let consider
the following two situation:</p>
<ul>
<li>If <span class="math inline">\(a_{p_l} &lt; a_k\)</span>, <span
class="math inline">\(a_{p_l}\)</span> might be the answer for <span
class="math inline">\(k\)</span>, and we need to delete <span
class="math inline">\(a_{p_l}\)</span> from the sequence since <span
class="math inline">\(a_k &gt; a_{p_l}\)</span> and <span
class="math inline">\(k &gt; p_l\)</span>.</li>
<li>If <span class="math inline">\(a_{p_l} &gt; a_k\)</span>, elements
before <span class="math inline">\(a_{p_l}\)</span> cannot contribute to
<span class="math inline">\(k\)</span> and we stop here.</li>
</ul>
<p>We repeatedly move away the last element of the sequence until it is
greater than <span class="math inline">\(a_k\)</span>, and the last
removed element is <span class="math inline">\(k\)</span>'s answer.'</p>
<p>Finally, we append <span class="math inline">\(a_k\)</span> to the
sequence, since now <span class="math inline">\(a_k\)</span> is a suffix
maximum.</p>
<p>Reviewing the entire process, can you now figure out what the
"decreasing sequence" is?</p>
<p>It is a <strong>stack</strong>!</p>
<p>Actually, this data structure is called <strong>Monotonic
Stack</strong>, a stack whose elements are either increasing or
decreasing.</p>
<p>We can implement the core process using simply stack's operation:
push and pop.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">	<span class="keyword">if</span> (!stk.<span class="built_in">empty</span>() &amp;&amp; A[i] &gt; A[stk.<span class="built_in">top</span>()]) &#123;</span><br><span class="line">		l[i] = stk.<span class="built_in">top</span>();</span><br><span class="line">		stk.<span class="built_in">pop</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	stk.<span class="built_in">push</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Finding the right child can be solved by scanning the sequence from
right to left.</p>
<p>(In fact, only one scanning from left to right is enough, think about
how to implement)</p>
<p>Since one element will be pushed into and popped from the stack at
most once, the time complexity is <span
class="math inline">\(O(n)\)</span>.</p>
<p><strong>lab4F Fencing Hall</strong>: By Zhang Shuwei</p>
<p>The core idea of the problem is to keep track of the maximum/minimum
of a sliding window using <strong>monotonic queue</strong>.</p>
<p>Consider a sliding window <span class="math inline">\([l,r]\)</span>,
if the left boundary is fixed, when we move the right boundary, the
difference of the maximum and minimum in the interval may increase.
Hence we need to adjust the left boundary as we moving the right
boundary forward such that the difference is within the given range
<span class="math inline">\(k\)</span>.</p>
<p>For simplicity, we only consider the case of the maximum value. As we
slide the window, we use a queue to maintain a decreasing sub-sequence
in which each element is a suffix maximum of the window (similar to that
in the previous problem). Suppose we now move the right boundary from
<span class="math inline">\(r\)</span> to <span
class="math inline">\(r+1\)</span>:</p>
<ul>
<li>We repeatedly pop the last element of the queue until the queue is
empty or the tail is larger than <span class="math inline">\(a_{r +
1}\)</span>. Then we append <span class="math inline">\(a_{r +
1}\)</span> to the queue.</li>
<li>The maximum of the window is the value of the queue's first
element.</li>
<li>To satisfy the difference limitation, we may also move the left
boundary forward, during which we must pop the queue's front elements
that are no longer in the window.</li>
</ul>
<p>The reason that we can discard the queue's last element if it is
smaller than current element $a_{r + 1} $is similar to that in the
previous problem, that <span class="math inline">\(a_{r + 1}\)</span>
will dominate the queue's tail in the following moves.</p>
<p>Implementation details are left as exercise.</p>
<p><span class="math inline">\(d(X^2) = dX\cdot X+X\cdot dX\)</span></p>
<p><strong>Lab3D Converted Vinux input</strong></p>
<p>In this problem, you need to implement a one-line editor.</p>
<p>The idea of using the bidirectional linked list is
straightforward.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="type">char</span> ch;</span><br><span class="line">   <span class="keyword">public</span> Node left, right;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Hint: EOF is represented by -1. You can preserve this convention.</p>
</blockquote>
<p>Also, maintain some additional pointers, pointing to the head node,
tail node (EOF), and current node.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Node hd, tl, current;</span><br></pre></td></tr></table></figure>
<ul>
<li>r: next single input would replace the current character;</li>
</ul>
<p>You could immediately read the next character and replace the
character of the current node with the new one.</p>
<p>Please note that the EOL will revive immediately at the end of the
line whenever it vanishes! So if the current node is EOF, you should
first create a new EOF, adjacent to the right of the current node,
before (or, after) replacing the current character. Don't forget to
update <code>bk</code>.</p>
<ul>
<li>I: move the character pointer to the head of the line;</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">current = hd;</span><br></pre></td></tr></table></figure>
<ul>
<li>H: left shift the current character pointer unless it is at the
leftmost place;</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (current != hd) &#123;</span><br><span class="line">   current = current.left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>L: right shift the current character pointer unless it is at the
rightmost place;</li>
</ul>
<p>Similar to <code>H</code>.</p>
<ul>
<li>x: delete the current character;</li>
</ul>
<p>If the current character is not EOF, simply remove it from the linked
list.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Node</span> <span class="variable">L</span> <span class="operator">=</span> current.left;</span><br><span class="line"><span class="type">Node</span> <span class="variable">R</span> <span class="operator">=</span> current.right;</span><br><span class="line">L.right = R;</span><br><span class="line">R.left = L;</span><br></pre></td></tr></table></figure>
<p>If the current character is EOF, just do nothing.</p>
<p><strong>Lab3E From-now-on minimum difference</strong></p>
<p><del>Prerequisite: Monotonic Stack.</del></p>
<p><del>Task: Given a sequence <span
class="math inline">\(a_1,...,a_n\)</span>. Find <span
class="math inline">\(r_i = \min_{j&gt;i,a_j&gt;a_i} j\)</span> for
every <span class="math inline">\(i\)</span> in <span
class="math inline">\(\mathcal O(n)\)</span>.</del></p>
<p>Think about finding the minimum <span
class="math inline">\(a_j\)</span> such that <span
class="math inline">\(j &gt; i\)</span> and <span
class="math inline">\(a_j \ge a_i\)</span>. The opposite <span
class="math inline">\(a_j\le a_i\)</span> is similar.</p>
<blockquote>
<p>Hint: I suggest you write a function (or method) and call it twice.
Before the second call, transform <span
class="math inline">\(a_i\)</span> to <span
class="math inline">\(-a_i\)</span>. This will reverse the numerical
order.</p>
<p>Update: An alternative to calling twice is to check the left neighbor
and the right neighbor. (I complicated it again)</p>
</blockquote>
<p>Firstly, we sort all the numbers <span class="math inline">\(a_1,
a_2, \ldots, a_n\)</span> into <span class="math inline">\(b_1 \le b_2
\le \cdots \le b_n\)</span>.</p>
<p>Then let <span class="math inline">\(p_i\)</span> denote that <span
class="math inline">\(a_i\)</span> maps to <span
class="math inline">\(b[p_i]\)</span>.</p>
<p>Next, construct a bidirectional linked list: <span
class="math inline">\(b_1 \leftrightarrow b_2 \leftrightarrow b_3
\leftrightarrow \cdots \leftrightarrow b_n\)</span>.</p>
<p>Now, we erase <span class="math inline">\(a_1, a_2, \ldots,
a_n\)</span> from the list one by one. Specifically, when erasing <span
class="math inline">\(a_i\)</span>, we are actually erasing <span
class="math inline">\(b[p_i]\)</span> from the list. Before erasing, we
first get the right neighbor of <span
class="math inline">\(b[p_i]\)</span> - it is the answer for <span
class="math inline">\(a_i\)</span> (not-yet erased means "to the right",
and the sorted values imply the "smallest").</p>
<p>Think about the correctness by yourself. It is really a smart
method!</p>
<p><strong>Lab3F Peggy hates decreasing</strong></p>
<p>There will be multiple rounds of deletion. If we can precisely
identify the elements to delete in each round, the total complexity will
be <span class="math inline">\(\mathcal{O}(n)\)</span>, as each element
is examined (or deleted) at most once.</p>
<p>To facilitate fast deletion, we construct a linked list. Initially,
the elements <span class="math inline">\(a_1, a_2, \dots, a_n\)</span>
are linked together.</p>
<p>In the first round, a for-loop is used to find the elements that need
to be erased.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i ++) &#123;</span><br><span class="line">   <span class="keyword">if</span> (a[i] is decreasing) &#123;</span><br><span class="line">      Q1.push(node[i]);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Starting from the second round, the deletion queue can be derived
from the previous round's queue, based on the following observation: If
an element is not "decreasing" initially and neither of its neighbors
has been deleted now, it remains "non-decreasing".</p>
<p>Now, suppose we are deleting elements <span
class="math inline">\(x\)</span> (in the linked list) one by one from
the queue <span class="math inline">\(Q_x\)</span>. After removing <span
class="math inline">\(x\)</span>, we add its neighbors
<code>x.left</code> and <code>x.right</code> to a "candidate list" for
<span class="math inline">\(Q_{x+1}\)</span>. Once the current round of
deletions is complete, we check each element to determine if it should
be added in <span class="math inline">\(Q_{x+1}\)</span>. This process
continues until <span class="math inline">\(Q_x\)</span> is empty.</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>2024 Fall - Data Structures and Algorithms Analysis Tutorials</p><p><a href="https://hfhongzy.github.io/tutorials/index.html">https://hfhongzy.github.io/tutorials/index.html</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Hong Zhaoyang</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2024-10-22</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2024-12-20</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><!--!--></article></div><!--!--><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Hong Zhaoyang"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Hong Zhaoyang</p><p class="is-size-6 is-block">Undergrad (2022-2026)</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Shenzhen, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">2</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/hfhongzy" target="_blank" rel="me noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Wechat" href="/img/wechat.jpg"><i class="fab fa-weixin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Github" href="https://github.com/hfhongzy"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://dbgroup.sustech.edu.cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">SUSTech DBGroup</span></span><span class="level-right"><span class="level-item tag">dbgroup.sustech.edu.cn</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-09-22T11:02:21.000Z">2024-09-22</time></p><p class="title"><a href="/2024/09/22/AI-Exam/">Artificial Intelligence (H) Sample Paper</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-07-11T10:09:09.000Z">2024-07-11</time></p><p class="title"><a href="/2024/07/11/About/">About</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/09/"><span class="level-start"><span class="level-item">September 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/07/"><span class="level-start"><span class="level-item">July 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><!--!--></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">My Site</a><p class="is-size-7"><span>&copy; 2024 Hong Zhaoyang</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/mhchem.min.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script src="/js/pjax.js"></script><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>